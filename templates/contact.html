{% extends 'layouts/base/base.html' %}
{% block content %}
    <!-- Contact Start -->
    <div class="container-fluid contact py-5">
        <div class="container py-5">
            <div class="row g-5">
                <div class="col-xl-6">
                    <div class="wow fadeInUp" data-wow-delay="0.2s">
                        <div class="bg-light rounded p-5 mb-5">
                            <h4 class="text-primary mb-4">Aloqa uchun</h4>
                            <div class="row g-4">
                                <div class="col-md-6">
                                    <div class="contact-add-item">
                                        <div class="contact-icon text-primary mb-4">
                                            <i class="fas fa-map-marker-alt fa-2x"></i>
                                        </div>
                                        <div>
                                            <h4>Manzil</h4>
                                            <p class="mb-0">{{ site_information.first.location }}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="contact-add-item">
                                        <div class="contact-icon text-primary mb-4">
                                            <i class="fas fa-envelope fa-2x"></i>
                                        </div>
                                        <div>
                                            <h4>Pochta</h4>
                                            <p class="mb-0">{{ site_information.first.email }}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="contact-add-item">
                                        <div class="contact-icon text-primary mb-4">
                                            <i class="fa fa-phone-alt fa-2x"></i>
                                        </div>
                                        <div>
                                            <h4>Telefon raqam</h4>
                                            <p class="mb-0">{{ site_information.first.phone }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="bg-light p-5 rounded h-100 wow fadeInUp" data-wow-delay="0.2s">
                            <h4 class="text-primary">Send Your Message</h4>
                            <p class="mb-4">The contact form is currently inactive. Get a functional and working contact
                                form with Ajax & PHP in a few minutes. Just copy and paste the files, add a little code
                                and you're done.</p>
                            <form id="contactForm">
                                <div class="row g-4">
                                    <div class="col-lg-12 col-xl-6">
                                        <div class="form-floating">
                                            <input type="text" class="form-control border-0" id="name"
                                                   placeholder="Ismingiz" required>
                                            <label for="name">Ismingiz</label>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 col-xl-6">
                                        <div class="form-floating">
                                            <input type="text" class="form-control border-0" id="last_name"
                                                   placeholder="Familiyangiz" required>
                                            <label for="last_name">Familiyangiz</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-floating">
                                            <input type="number" class="form-control border-0" id="phone"
                                                   placeholder="Telefon raqam (+998)" required>
                                            <label for="phone">Telefon raqam (+998)</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-floating">
                                            <input type="text" class="form-control border-0" id="subject"
                                                   placeholder="Mavzu" required>
                                            <label for="subject">Mavzu</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-floating">
                                            <textarea class="form-control border-0"
                                                      placeholder="Mavzu haqida batafsil yozing" id="message"
                                                      style="height: 160px" required></textarea>
                                            <label for="message">Qo'shimcha ma'lumot</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <button type="submit" class="btn btn-primary w-100 py-3">Jo'natish</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-xl-6 wow fadeInRight" data-wow-delay="0.2s">
                    <div style="position:relative;overflow:hidden;"><a
                            href="https://yandex.uz/maps?utm_medium=mapframe&utm_source=maps"
                            style="color:#eee;font-size:12px;position:absolute;top:0px;">Яндекс Карты</a><a
                            href="https://yandex.uz/maps/?ll=67.783017%2C38.314624&mode=search&sll=67.897611%2C38.321472&text=38.321472%2C67.897611&utm_medium=mapframe&utm_source=maps&z=10.76"
                            style="color:#eee;font-size:12px;position:absolute;top:14px;">Денауский район —
                        Яндекс Карты</a>
                        <iframe src="https://yandex.uz/map-widget/v1/?ll=67.783017%2C38.314624&mode=search&sll=67.897611%2C38.321472&text=38.321472%2C67.897611&z=10.76"
                                width="560" height="400" frameborder="1" allowfullscreen="true"
                                style="position:relative;"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    <!-- Contact End -->
    <script>
        document.getElementById('contactForm').addEventListener('submit', function (event) {
            event.preventDefault(); // Formani yuborishni to'xtatadi

            // Formadagi ma'lumotlarni olish
            const name = document.getElementById('name').value;
            const lastName = document.getElementById('last_name').value;
            const phone = document.getElementById('phone').value;
            const subject = document.getElementById('subject').value;
            const message = document.getElementById('message').value;

            // Create message text
            const textMessage = `Ism: ${name}\nFamiliya: ${lastName}\nTelefon: ${phone}\nMavzu: ${subject}\nQo'shimcha ma'lumot: ${message}`;

            // Telegram bot token va chat ID
            const token = '6541588111:AAEpIblw9LOeFU_AnnBxFzCLl-PjpCFw9ZI';
            const chatId = '-1002428495017';

            // request Telegram API
            fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    chat_id: chatId,
                    text: textMessage,
                    parse_mode: 'Markdown'
                }),
            })
                .then(response => response.json())
                .then(data => {
                    if (data.ok) {
                        alert('Xabar yuborildi! Tez orada operatorlarimiz siz bilan bog\'lanishadi!');
                    } else {
                        alert('Xabar yuborishda xato yuz berdi.');
                    }
                    document.getElementById('contactForm').reset();
                })
                .catch(error => console.error('Xato:', error));
        });
    </script>
{% endblock %}